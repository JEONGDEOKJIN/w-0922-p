<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="referrer" content="same-origin" />

    <!-- 메타정보 -->
    <template
      shopby-partials="@partials/common-meta.html"
      shopby-partials-js="@partials/common-meta.js"
    ></template>

    <link rel="shortcut icon" href="/favicon.ico" />
    <link
      rel="stylesheet"
      href="https://uicdn.toast.com/tui.date-picker/latest/tui-date-picker.css"
    />
    <link rel="stylesheet" href="/shopby-skin-pc.css" />
    <link rel="stylesheet" href="/custom-common.css" />
    <link rel="stylesheet" href="/pages/my/coupon-list.css" />

    <script
      shopby-wcs-log
      type="text/javascript"
      src="https://wcs.naver.net/wcslog.js"
    ></script>
    <!-- 스킨 스크립트 -->
    <script src="/libs/error.js"></script>
    <script
      src="https://shopby-skin.cdn-nhncommerce.com/1.2.14/shopby-skin.js"
      crossorigin="anonymous"
    ></script>
    <script src="/libs/api-initialize-pc.js"></script>
    <script src="/libs/custom-common.js"></script>
  </head>
  <body>
    <!-- 디자인팝업 -->
    <template
      shopby-partials="@partials/design-popup.html"
      shopby-partials-js="@partials/design-popup.js"
    ></template>
    <!-- 상단 레이아웃 -->
    <template
      class="shopby-header"
      shopby-partials="@partials/common-header.html"
      shopby-partials-js="@partials/common-header.js"
    ></template>

    <main class="l-my-page">
      <section class="page-content-top">
        <ol class="page-content-top__path page-content-top__location">
          <li><a href="/">HOME</a></li>
          &gt;
          <li><a href="/pages/my/my-page.html">마이페이지</a></li>
          &gt;
          <li>쿠폰</li>
        </ol>
      </section>

      <div class="my-page-box">
        <template
          class="l-my-page-menu"
          shopby-partials="@partials/my-menu.html"
          shopby-menu-title="쿠폰"
        ></template>

        <div class="right-box">
          <div class="right-box__container">
            <p class="right-box__head">
              <span class="font-noto right-box__title">쿠폰</span>
            </p>

            <coupon-tabs>
              <script type="text/x-handlebars-template">
                <div>
                    <ul class="tab my-page-coupon__tab" slot="tabs">
                        <li>
                            <button type="button" class="tab__btn my-page-coupon__tab-btn {{#ifEq currentTab 'ISSUABLE'}}is-active{{/ifEq}}" shopby-on:click="TAB_CLICK" shopby-tab-value="ISSUABLE">사용 가능 쿠폰</button>
                        </li>
                        <li>
                            <button type="button"class="tab__btn my-page-coupon__tab-btn {{#ifEq currentTab 'UNISSUABLE'}}is-active{{/ifEq}}" shopby-on:click="TAB_CLICK" shopby-tab-value="UNISSUABLE">사용 불가 쿠폰</button>
                        </li>
                    </ul>
                </div>
              </script>
            </coupon-tabs>

            <date-search
              start-ymd:query="startYmd"
              end-ymd:query="endYmd"
              date-type:query="dateType"
              shopby-default-type="7d"
            >
              <script type="text/x-handlebars-template">
                <div class="date-selector">
                  <div
                    class="date-selector__button_box"
                    shopby-date-selector="shopby-date-selector"
                    shopby-on:click="CLICK_DATE"
                  >
                    <button
                      class="font-noto btn date-selector__select-btn"
                      value="td"
                    >오늘</button>
                    <button
                      class="font-noto btn date-selector__select-btn"
                      value="7d"
                    >7일</button>
                    <button
                      class="font-noto btn date-selector__select-btn"
                      value="15d"
                    >15일</button>
                    <button
                      class="font-noto btn date-selector__select-btn"
                      value="1m"
                    >1개월</button>
                    <button
                      class="font-noto btn date-selector__select-btn"
                      value="3m"
                    >3개월</button>
                    <button
                      class="font-noto btn date-selector__select-btn"
                      value="1y"
                    >1년</button>
                  </div>
                  <div class="date-selector__date-picker-wrap">
                    <div
                      class="date-selector__date-picker tui-datepicker-input tui-datetime-input tui-has-focus"
                    >
                      <input
                        type="text"
                        name="startDate"
                        readonly="readonly"
                        aria-label="Date-Time"
                      />
                      <span class="icon-wrap">
                        <svg
                          xmlns="http://www.w3.org/2000/svg"
                          width="32"
                          height="32"
                          viewBox="0 0 32 32"
                          fill="none"
                        >
                          <path
                            fill-rule="evenodd"
                            clip-rule="evenodd"
                            d="M11 7.5C11 7.22386 11.2239 7 11.5 7C11.7761 7 12 7.22386 12 7.5V9.25H20V7.5C20 7.22386 20.2239 7 20.5 7C20.7761 7 21 7.22386 21 7.5V9.25H24C24.5523 9.25 25 9.69772 25 10.25V24C25 24.5523 24.5523 25 24 25H8C7.44772 25 7 24.5523 7 24V10.25C7 9.69772 7.44772 9.25 8 9.25H11V7.5ZM20 10.25V11C20 11.2761 20.2239 11.5 20.5 11.5C20.7761 11.5 21 11.2761 21 11V10.25H24V24H8V10.25H11V11C11 11.2761 11.2239 11.5 11.5 11.5C11.7761 11.5 12 11.2761 12 11V10.25H20Z"
                            fill="#222222"
                          />
                          <rect
                            x="7"
                            y="13"
                            width="18"
                            height="1"
                            fill="#222222"
                          />
                        </svg>
                      </span>
                      <div class="start-date-picker"></div>
                    </div>
                    ~
                    <div
                      class="date-selector__date-picker tui-datepicker-input tui-datetime-input tui-has-focus"
                    >
                      <input
                        type="text"
                        name="endDate"
                        readonly="readonly"
                        aria-label="Date-Time"
                      />
                      <span class="icon-wrap">
                        <svg
                          xmlns="http://www.w3.org/2000/svg"
                          width="32"
                          height="32"
                          viewBox="0 0 32 32"
                          fill="none"
                        >
                          <path
                            fill-rule="evenodd"
                            clip-rule="evenodd"
                            d="M11 7.5C11 7.22386 11.2239 7 11.5 7C11.7761 7 12 7.22386 12 7.5V9.25H20V7.5C20 7.22386 20.2239 7 20.5 7C20.7761 7 21 7.22386 21 7.5V9.25H24C24.5523 9.25 25 9.69772 25 10.25V24C25 24.5523 24.5523 25 24 25H8C7.44772 25 7 24.5523 7 24V10.25C7 9.69772 7.44772 9.25 8 9.25H11V7.5ZM20 10.25V11C20 11.2761 20.2239 11.5 20.5 11.5C20.7761 11.5 21 11.2761 21 11V10.25H24V24H8V10.25H11V11C11 11.2761 11.2239 11.5 11.5 11.5C11.7761 11.5 12 11.2761 12 11V10.25H20Z"
                            fill="#222222"
                          />
                          <rect
                            x="7"
                            y="13"
                            width="18"
                            height="1"
                            fill="#222222"
                          />
                        </svg>
                      </span>
                      <div class="end-date-picker"></div>
                    </div>
                    <button
                      type="button"
                      class="btn btn--fill-dark-gray btn--sm date-picker__search"
                      shopby-action="SEARCH_ACCUMULATION"
                    >조회</button>
                  </div>
                </div>
              </script>
            </date-search>

            <coupon-total-count>
              <script type="text/x-handlebars-template">
                <div>
                  <div slot="totalCount">
                    {{#ifEq currentTab "ISSUABLE"}}
                      <summary
                        class="l-title l-title__align-end right-box__no-end-line"
                      >
                        <div class="my-page__total-count-box">
                          <p class="my-page__total-count coupon-total-count">
                            사용가능 쿠폰 수
                            <span class="my-page__count">
                              <span class="highlight" slot="usableCouponCnt">
                                {{usableCouponCnt}}
                              </span>
                              건
                            </span>
                          </p>
                        </div>
                        <button
                          type="button"
                          class="btn btn--fill-dark-gray btn--sm"
                          shopby-action="REGISTER"
                        >
                          쿠폰 등록
                        </button>
                      </summary>
                    {{/ifEq}}
                  </div>
                </div>
              </script>
            </coupon-total-count>

            <coupon-list
              default-page-size="20"
              page-size:query="pageSize"
              page-number:query="pageNumber"
              sort-direction:query="sortDirection"
              start-ymd:query="startYmd"
              usable:query="usable"
              uses-pagination
            >
              <script type="text/x-handlebars-template">
                                <div>
                                    <div class="my-page-coupon" slot='couponList'>
                                        <div class='l-table my-page-coupon__table'>
                                            <div class="coupon-box">
                                                {{#each items}}
                                                <div class="coupon-box-second">
                                                    <div
                                                        shopby-coupon-no='{{couponNo}}'
                                                        shopby-coupon-target-type='{{couponTargetType}}'
                                                        shopby-coupon-idx='{{@index}}'
                                                        class="coupon-item-box"
                                                    >
                                                        <div class="coupon-name">
                                                            {{couponName}}
                                                        </div>
                                                        <div class='my-page-coupon__coupon-detail-amount-info'>
                                                            <span
                                                                    class='my-page-coupon__coupon-detail-amount'
                                                                >{{convertToKoreanCurrency amount}}</span>
                                                                <span>{{unit}}</span>
                                                                <span>{{couponTypeLabel}} 할인</span>
                                                        </div>
                                                        <div class='my-page-coupon__coupon-detail-box'>
                                                            {{#if limitSalePrice}}
                                                                <div class=''>
                                                                    <span>{{convertToKoreanCurrency limitSalePrice}} 원 이상 </span>
                                                                    <span>구매 시 사용가능</span>
                                                                </div>
                                                            {{/if}}
                                                        </div>
                                                            {{#if issueYmdt}}
                                                                <div class='my-page-coupon__coupon_date_day'>
                                                                    {{formatUseByDate issueYmdt}} ~  {{formatUseByDate expireYmdt}}
                                                                </div>
                                                            {{else}} - {{/if}}
                                                    </div>
                                                    <div class="coupon-item-box-icon">

                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                  <path d="M21 15V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V15" stroke="white" stroke-linecap="round" stroke-linejoin="round"/>
                  <path d="M7 10L12 15L17 10" stroke="white" stroke-linecap="round" stroke-linejoin="round"/>
                  <path d="M12 15V3" stroke="white" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>


                                                    </div>
                                                </div>
                                                {{/each}}
                                            </div>
                                        </div>
                                        <div slot='totalCount'>
                                            {{#ifEq totalCount 0}}
                                            <div slot="isLoading">
                                                {{#if isLoading}}
                                                <div class="loader loader--lg loader--full">
                                                    <span class="spinner"></span>
                                                </div>
                                                {{else}}
                                                <div class='notice empty-list'>
                                                    <span class='sprite-image notice--warning'></span>
                                                    <em class='notice__description--center'>쿠폰 내역이 없습니다.</em>
                                                </div>
                                                {{/if}}
                                            </div>
                                            {{/ifEq}}
                                        </div>
                                    </div>

                                    <div slot='totalCount'>
                                        {{#ifGt totalCount 0}}
                                        <div class="pagination" slot="pagination">
                                            <a href="?{{pagination.firstPage}}">
                                                <button class="sprite-image pagination__btn pagination__btn--double-lt">
                                                </button>
                                            </a>
                                            <a href="?{{pagination.prevPage}}">
                                                <button class="sprite-image pagination__btn pagination__btn--lt">
                                                </button>
                                            </a>
                                            {{#each pagination.pages}}
                                            <a class="pagination__link {{#if isCurrentPage}}is-current{{/if}}" href="?{{param}}">{{page}}</a>
                                            {{/each}}
                                            <a href="?{{pagination.nextPage}}">
                                                <button class="sprite-image pagination__btn pagination__btn--rt">
                                                </button>
                                            </a>
                                            <a href="?{{pagination.lastPage}}">
                                                <button class="sprite-image pagination__btn pagination__btn--double-rt">
                                                </button>
                                            </a>
                                        </div>
                                        {{/ifGt}}
                                    </div>
                                </div>
              </script>
            </coupon-list>
          </div>
        </div>
      </div>
    </main>

    <!-- 퀵메뉴 (최상단 이동 + 최근 본 상품) -->
    <template shopby-partials="@partials/quick-menu.html"></template>
    <!-- 최근 본 상품(오프캔버스) -->
    <template shopby-partials="@partials/recent-product.html"></template>
    <!-- 하단 레이아웃 -->
    <template
      shopby-partials="@partials/common-footer.html"
      shopby-partials-js="@partials/common-footer.js"
    ></template>

    <!-- 레이어 모달  (알럿, 컴펌 사용 시 필요)-->
    <template shopby-partials="@partials/modal.html"></template>

    <layer-modal-area
      type="title"
      name="coupon-register-form"
      src="@modals/register-coupon.html"
    ></layer-modal-area>

    <script src="/libs/external-service-config.js"></script>
    <script src="/pages/my/coupon-list.js"></script>
    <script src="/libs/intro.js"></script>
    <script src="/libs/naver-marketing-config.js"></script>
  </body>
</html>
